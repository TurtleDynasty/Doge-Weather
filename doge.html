<html>
	<head>
		<script>
			function myFunc(){
    			var xmlhttp = new XMLHttpRequest();
    			var url = "http://api.openweathermap.org/data/2.5/weather?q=Flagstaff";

    			xmlhttp.onreadystatechange=function(){
      				if (xmlhttp.readyState==4 && xmlhttp.status==200){
        				var myArr = JSON.parse(xmlhttp.responseText);
		
						var temp = parseFloat(myArr.main.temp) - 273.15;
						temp = temp.toFixed(2)
						temp = temp.toString();
		
						var time = new Date();
						//var time = "" + getDate() + " - " + getMonth() + " - " + getFullYear();
		
						var out = "The weather for " + myArr.name + " is:<br>" + temp + " C (roughly),<br>and " + myArr.weather[0].description + "<br>" + "As of: " + time;
		
        				document.getElementById("result").innerHTML = out;
    				}
  				}

				xmlhttp.open("GET",url,true);
				xmlhttp.send();
			}
		</script>
	</head>
	<body>

		<button type="button" onclick="myFunc()">Click for weather!</button>
		<div id="result"></div>

	</body>
</html>
